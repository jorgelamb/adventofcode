input.split(",,").map(passport => { var fields = passport.split(/[ ,]/).map(fieldValue => fieldValue.split(":")); var names = fields.map(fieldValue => fieldValue[0]); var values = fields.map(fieldValue => fieldValue[1]); var byr = values[names.indexOf("byr")]; var iyr = values[names.indexOf("iyr")]; var eyr = values[names.indexOf("eyr")]; var hgt = values[names.indexOf("hgt")]; var hcl = values[names.indexOf("hcl")]; var ecl = values[names.indexOf("ecl")]; var pid = values[names.indexOf("pid")]; try { var hgtFields = hgt.match(/^([0-9]*)(cm|in)$/); console.log("eyr: "+eyr+" "+(eyr >= 2020 && eyr <= 2030)); return (fields.length > 7 || (fields.length == 7 && fields.map(fieldValue => fieldValue[0]).indexOf("cid")==-1)) && (byr >= 1920) && (byr <= 2002) && (iyr >= 2010) && (iyr <= 2020) && (eyr >= 2020) && (eyr <= 2030) && ((hgtFields[2]=="cm" && hgtFields[1]>=150 && hgtFields[1]<=193) || (hgtFields[2]=="in" && hgtFields[1]>=59 && hgtFields[1]<=76)) && (hcl.match(/^#[0-9a-f]{6}$/)) && (["amb", "blu", "brn", "gry", "grn", "hzl", "oth"].indexOf(ecl)>=0) && (pid.match(/^[0-9]{9}$/)) } catch(e){console.log(e);return false}}).reduce((accumulator, currentValue) => { console.log(currentValue); return accumulator + (currentValue?1:0);}, 0);
